<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:include="include :: header('新增任务')" />
    <link th:href="@{/ruoyi/css/bootstrap.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/font-awesome.min.css}" rel="stylesheet"/>
    <!-- bootstrap-table 表格插件样式 -->
    <link th:href="@{/ajax/bootstrap-table.min.css?v=20210602}" rel="stylesheet"/>
    <link th:href="@{/css/animate.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/style.min.css?v=20200903}" rel="stylesheet"/>
    <link th:href="@{/ruoyi/css/ry-ui.css?v=4.6.2}" rel="stylesheet"/>
    <link rel="stylesheet" th:href="@{/css/fileinput.css}">
    <link rel="stylesheet" th:href="@{/css/base.css}"/>
    <link rel="stylesheet" th:href="@{/css/info-mgt.css}"/>
    <link rel="stylesheet" th:href="@{/css/layui.css}" media="all">

    <script  th:src="@{/js/jqueryNew.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
    <script th:src="@{/js/bootstrap-table.js}"></script>
    <script th:src="@{/js/bootstrap-table-zh-CN.min.js}"></script>
    <script th:src="@{/js/fileinput.js}" ></script>
    <script th:src="@{/js/zh.js}" ></script>
    <script th:src="@{/js/layui.js}" charset="utf-8"></script>
</head>
<body>
<div class="main-content">
    <form id="form-user-add" class="form-horizontal">
        <!-- platform-->
        <h4 class="form-header h4">外挂软件对接平台信息</h4>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label is-required">对接平台名称:</label>
                    <div class="col-sm-8">
                        <input id="platform_name" name="platform_name" placeholder="请输入对接平台名称" class="form-control" type="text" maxlength="30" required>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label is-required" >对接平台类别:</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                         <input id="network"  type="text" name="network" placeholder="请输入平台类别" class="form-control" maxlength="30" required>
                            <span class="input-group-addon"><i class="fa fa-search"></i></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label ">状态：</label>
                    <div class="col-sm-8">
                        <select name="status" class="select form-control"  id="status">
                            <option value="">请选择</option>
                            <option value="0">正常</option>
                            <option value="1">停用</option>
                            <option value="2">未启用</option>
                        </select>
                    </div>
                </div>
            </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="col-sm-4 control-label is-required">敏感程度：</label>
                        <div class="col-sm-8">
                            <select name="interface_sensitive" class="select form-control"  id="interface_sensitive">
                                <option value="">请选择</option>
                                <option value="非敏感接口">非敏感接口</option>
                                <option value="全国敏感接口">全国敏感接口</option>
                                <option value="本地敏感接口">本地敏感接口</option>
                            </select>
                        </div>
                    </div>
                </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="form-group">
                    <label class="col-xs-2 control-label is-required">接口详细信息：</label>
                    <div class="col-xs-10">
                        <textarea id="info" maxlength="500" class="form-control" rows="6" required></textarea>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="form-group">
                    <label class="col-xs-2 control-label ">备注：</label>
                    <div class="col-xs-10">
                        <textarea id="platform_comment" maxlength="500" class="form-control" rows="6" ></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!--product-->
        <h4 class="form-header h4">对接软件产品信息</h4>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label is-required">产品名称：</label>
                    <div class="col-sm-8">
                            <input id="product_name"  placeholder="请输入产品名称" class="form-control" type="text" maxlength="30" required>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label is-required">版本号：</label>
                    <div class="col-sm-8">
                            <input id="version"  class="form-control " type="text" maxlength="30" placeholder="请输入版本号" required>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="form-group">
                    <label class="col-xs-2 control-label ">备注：</label>
                    <div class="col-xs-10">
                        <textarea id="product_comment" maxlength="500" class="form-control" rows="6" ></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- contact-->
        <h4 class="form-header h4">对接软件生产厂商信息</h4>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label is-required">联系人姓名:</label>
                    <div class="col-sm-8">
                        <input id="contact_name" placeholder="请输入联系人姓名" class="form-control" type="text" maxlength="30" required>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label ">身份证号:</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                        <input id="pid" placeholder="请输入身份证号" class="form-control" type="text" maxlength="30">
                        <span class="input-group-addon"><i class="fa fa-address-card"></i></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">负责人姓名:</label>
                    <div class="col-sm-8">
                        <input id="boss_name" placeholder="请输入负责人姓名" class="form-control" type="text" maxlength="30">
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">负责人联系方式:</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                            <input id="boss_contact" placeholder="请输入负责人联系方式" class="form-control" type="text" maxlength="30">
                            <span class="input-group-addon"><i class="fa fa-mobile"></i></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label is-required">电话:</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                        <input id="telephone" placeholder="请输入电话" class="form-control" type="text" maxlength="30" required>
                        <span class="input-group-addon"><i class="fa fa-phone"></i></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">传真:</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                            <input id="fax" placeholder="请输入传真" class="form-control" type="text" maxlength="30">
                            <span class="input-group-addon"><i class="fa fa-fax"></i></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">邮编:</label>
                    <div class="col-sm-8">
                            <input id="post_code" placeholder="请输入邮编" class="form-control" type="text" maxlength="30">
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">网址:</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                            <input id="website" placeholder="请输入网址" class="form-control" type="text" maxlength="30">
                            <span class="input-group-addon"><i class="fa fa-internet-explorer"></i></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">电子邮件:</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                        <input id="email" placeholder="请输入电子邮件" class="form-control" type="text" maxlength="30">
                        <span class="input-group-addon"><i class="fa fa-envelope"></i></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">地址:</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                            <input id="address" placeholder="请输入地址" class="form-control" type="text" maxlength="30" >
                            <span class="input-group-addon"><i class="fa fa-map-marker"></i></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">联系人类型：</label>
                    <div class="col-sm-8">
<!--                        <input id="type"  placeholder="联系人类型 0客户，1工作人员..."  type="text" class="form-control" maxlength="30">-->
                        <select name="type" class="select form-control"  id="type">
                            <option value="">请选择</option>
                            <option value="0">客户</option>
                            <option value="1">工作人员</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="form-group">
                    <label class="col-xs-2 control-label ">备注：</label>
                    <div class="col-xs-10">
                        <textarea id="contact_comment" maxlength="500" class="form-control" rows="6" ></textarea>
                    </div>
                </div>
            </div>
        </div>
        <!--   enterprise-->
        <h4 class="form-header h4">企业信息</h4>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label is-required">企业id:</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                            <input id="enterprise_uid" placeholder="与信用代码保持一致" class="form-control" type="text" maxlength="30" required>
                            <span class="input-group-addon"><i class="fa fa-building"></i></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label is-required">企业名:</label>
                    <div class="col-sm-8">
                            <input id="name" placeholder="请输入企业名" class="form-control" type="text" maxlength="30" required>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">注销⽇期:</label>
                    <div class="col-sm-8">
                        <input id="cancel_date" placeholder="请输入注销⽇期" class="form-control" type="datetime-local" maxlength="30">
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">企业状态:</label>
                    <div class="col-sm-8">
                        <input id="reg_status" placeholder="请输入企业状态" class="form-control" type="text" maxlength="30">
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">注册资本:</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                            <input id="reg_capital" placeholder="请输入注册资本" class="form-control" type="text" maxlength="30">
                            <span class="input-group-addon"><i class="fa fa-money"></i></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label is-required">城市:</label>
                    <div class="col-sm-8">
                        <input id="city" placeholder="请输入城市" class="form-control" type="text" maxlength="30" required>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">⼈员规模:</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                            <input id="staff_num_range" placeholder="请输入⼈员规模" class="form-control" type="text" maxlength="30">
                            <span class="input-group-addon"><i class="fa fa-users"></i></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">⾏业:</label>
                    <div class="col-sm-8">
                        <input id="industry" placeholder="请输入⾏业" class="form-control" type="text" maxlength="30">
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">股票号:</label>
                    <div class="col-sm-8">
                        <input id="bond_num" placeholder="请输入股票号" class="form-control" type="text" maxlength="30">
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">股票名:</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                        <input id="bond_name" placeholder="请输入股票名" class="form-control" type="text" maxlength="30">
                        <span class="input-group-addon"><i class="fa fa-bar-chart"></i></span>
                    </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">股票类型:</label>
                    <div class="col-sm-8">
                        <input id="bondType" placeholder="请输入股票类型" class="form-control" type="text" maxlength="30" >
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label ">法人类型:</label>
                    <div class="col-sm-8">
<!--                        <div class="input-group">-->
<!--                            <input id="legal_type" placeholder="法人类型，1 人 2 公司" class="form-control" type="text" maxlength="30">-->
<!--                            <span class="input-group-addon"><i class="fa fa-male"></i></span>-->
<!--                        </div>-->
                        <select name="legal_type" class="select form-control"  id="legal_type">
                            <option value="">请选择</option>
                            <option value="1">人</option>
                            <option value="2">公司</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">法人姓名:</label>
                    <div class="col-sm-8">
                        <div class="input-group">
                            <input id="legal_person_name" placeholder="请输入法人姓名" class="form-control" type="text" maxlength="30">
                            <span class="input-group-addon"><i class="fa fa-male"></i></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label">更新时间:</label>
                    <div class="col-sm-8">
                        <input id="update_times" placeholder="请输入更新时间" class="form-control" type="datetime-local" maxlength="30">
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label ">吊销⽇期:</label>
                    <div class="col-sm-8">
                        <input id="revoke_date" placeholder="请输入吊销⽇期" class="form-control" type="datetime-local" maxlength="30">
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label is-required">信用代码:</label>
                    <div class="col-sm-8">
                        <input id="creditCode" placeholder="请输入信用代码" class="form-control" type="text" maxlength="30" required>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12">
                <div class="form-group">
                    <label class="col-xs-2 control-label ">备注：</label>
                    <div class="col-xs-10">
                        <textarea id="comment" maxlength="500" class="form-control" rows="6" ></textarea>
                    </div>
                </div>
            </div>
        </div>

        <h4 class="form-header h4">上传申请材料</h4>
        <div class="container">
            <input id="uploadfile" type="file" class="file" multiple="multiple" name="file"/>
        </div>
        <div class="row">
            <div class="col-sm-offset-5 col-sm-10">
                <button type="button" class="btn btn-sm btn-primary" onclick="save()"><i class="fa fa-check"></i>保 存</button>&nbsp;
                <button type="button" class="btn btn-sm btn-danger" onclick="window.location.href='/material_audit.html'"><i class="fa fa-reply-all"></i>关 闭 </button>
            </div>
        </div>
    </form>
</div>

</body>
<script>
    function save() {
        //获取值
        var platform_name = $("#platform_name").val();
        if(platform_name == ""){
            alert("对接平台名不能为空！")
        }
        var network = $("#network").val();
        if(network == ""){
            alert("对接平台类别不能为空！")
        }
        var status = $("#status").val();
        var info = $("#info").val();
        if(info == ""){
            alert("接口详细信息不能为空！")
        }
        var interface_sensitive = $("#interface_sensitive").val();
        if(interface_sensitive == ""){
            alert("接口不能为空！")
        }
        var platform_comment = $("#platform_comment").val();
        var product_name = $("#product_name").val();
        if(product_name == ""){
            alert("产品名称不能为空！")
        }
        var version = $("#version").val();
        if(version == ""){
            alert("版本号不能为空！")
        }
        var product_comment = $("#product_comment").val();
        var contact_name = $("#contact_name").val();
        if(contact_name == ""){
            alert("联系人姓名不能为空！")
        }
        var pid = $("#pid").val();
        var boss_name = $("#boss_name").val();
        var boss_contact = $("#boss_contact").val();
        var telephone = $("#telephone").val();
        if(telephone == ""){
            alert("电话不能为空！")
        }
        var fax = $("#fax").val();
        var post_code = $("#post_code").val();
        var website = $("#website").val();
        var email = $("#email").val();
        var address = $("#address").val();
        var type = $("#type").val();
        var contact_comment = $("#contact_comment").val();
        var enterprise_uid = $("#enterprise_uid").val();
        if(enterprise_uid == ""){
            alert("企业id不能为空！")
        }
        var name = $("#name").val();
        if(name == ""){
            alert("企业名不能为空！")
        }
        var cancel_date = $("#cancel_date").val();
        var reg_status = $("#reg_status").val();
        var reg_capital = $("#reg_capital").val();
        var city = $("#city").val();
        if(city == ""){
            alert("城市不能为空！")
        }
        var staff_num_range = $("#staff_num_range").val();
        var bond_num = $("#bond_num").val();
        var industry = $("#industry").val();
        var bond_name = $("#bond_name").val();
        var revoke_date = $("#revoke_date").val();
        var legal_type = $("#legal_type").val();
        var update_times= $("#update_times").val();
        var legal_person_name = $("#legal_person_name").val();
        var comment = $("#comment").val();
        var bondType = $("#bondType").val();
        var creditCode = $("#creditCode").val();
        if(creditCode == ""){
            alert("信用代码不能为空！")
        }

        var contact_uid = null;
        var platform_uid = null;
        var product_uid = null;

        console.log(platform_name);

        $.ajax({
            url: "/addPlatform",
            type: "post",
            dataType: "json",
            data: {
                "platform_name": platform_name,
                "network": network,
                "status": status,
                "info": info,
                "interface_sensitive":interface_sensitive,
                "platform_comment": platform_comment,
            },
            success: function (res) {
                if (res.code == 1) {
                    platform_uid = res.uid;
                    $.ajax({
                        url: "/addContact",
                        type: "post",
                        dataType: "json",
                        data: {
                            "contact_name": contact_name,
                            "pid": pid,
                            "boss_name": boss_name,
                            "boss_contact": boss_contact,
                            "telephone": telephone,
                            "fax": fax,
                            "post_code": post_code,
                            "website": website,
                            "email": email,
                            "address": address,
                            "type": type,
                            "contact_comment": contact_comment
                        },
                        success: function (res) {
                            contact_uid = res.uid;
                            $.ajax({
                                url: "/addProduct",
                                type: "post",
                                dataType: "json",
                                data: {
                                    "product_name": product_name,
                                    "version": version,
                                    "platform_name": platform_name,
                                    "contact_name": contact_name,
                                    "product_comment": product_comment,
                                },
                                success: function (res){
                                    if(res.code == 1){
                                        product_uid = res.uid;
                                        $.ajax({
                                            url:"/addEnterprise",
                                            type: "post",
                                            dataType: "json",
                                            data:{
                                                "enterprise_uid":enterprise_uid,
                                                "name":name,
                                                "cancel_date":cancel_date,
                                                "reg_status":reg_status,
                                                "reg_capital":reg_capital,
                                                "city":city,
                                                "staff_num_range":staff_num_range,
                                                "bond_num":bond_num,
                                                "industry":industry,
                                                "bond_name":bond_name,
                                                "revoke_date":revoke_date,
                                                "legal_type":legal_type,
                                                "update_times":update_times,
                                                "legal_person_name":legal_person_name,
                                                "comment":comment,
                                                "bondType":bondType,
                                                "creditCode":creditCode
                                            },
                                            success: function (res) {
                                                if (res.code == 1) {
                                                    $.ajax({
                                                        url: "/addTask",
                                                        type: "post",
                                                        dataType: "json",
                                                        data: {
                                                            "client": contact_name,
                                                            "worker": contact_name,
                                                            "contact_uid": contact_uid,
                                                            "contact_name": contact_name,
                                                            "pid": pid,
                                                            "boss_name": boss_name,
                                                            "boss_contact": boss_contact,
                                                            "telephone": telephone,
                                                            "fax": fax,
                                                            "post_code": post_code,
                                                            "website": website,
                                                            "email": email,
                                                            "address": address,
                                                            "type": type,
                                                            "contact_comment": contact_comment,
                                                            "platform_uid": platform_uid,
                                                            "platform_name": platform_name,
                                                            "network": network,
                                                            "status": status,
                                                            "info": info,
                                                            "platform_comment": platform_comment,
                                                            "product_uid": product_uid,
                                                            "product_name": product_name,
                                                            "version": version,
                                                            "product_comment": product_comment,
                                                            "enterprise_uid": enterprise_uid,
                                                            "name":name,
                                                            "cancel_date":cancel_date,
                                                            "reg_status":reg_status,
                                                            "reg_capital":reg_capital,
                                                            "city":city,
                                                            "staff_num_range":staff_num_range,
                                                            "bond_num":bond_num,
                                                            "industry":industry,
                                                            "bond_name":bond_name,
                                                            "revoke_date":revoke_date,
                                                            "legal_type":legal_type,
                                                            "update_times":update_times,
                                                            "legal_person_name":legal_person_name,
                                                            "comment":comment,
                                                            "bondType":bondType,
                                                            "creditCode":creditCode,
                                                            "interface_sensitive":interface_sensitive,
                                                        },
                                                        success:function (){
                                                            //清空文本框
                                                            $("#platform_name").val("");
                                                            $("#network").val("");
                                                            $("#status").val("");
                                                            $("#info").val("");
                                                            $("#platform_comment").val("");
                                                            $("#product_name").val("");
                                                            $("#version").val("");
                                                            $("#product_comment").val("");
                                                            $("#contact_name").val("");
                                                            $("#pid").val("");
                                                            // $("#enterprise_id").val("");
                                                            $("#boss_name").val("");
                                                            $("#boss_contact").val("");
                                                            $("#telephone").val("");
                                                            $("#fax").val("");
                                                            $("#post_code").val("");
                                                            $("#website").val("");
                                                            $("#email").val("");
                                                            $("#address").val("");
                                                            $("#type").val("");
                                                            $("#contact_comment").val("");
                                                            $("#enterprise_uid").val("");
                                                            $("#name").val("");
                                                            $("#cancel_date").val("");
                                                            $("#reg_status").val("");
                                                            $("#reg_capital").val("");
                                                            $("#city").val("");
                                                            $("#staff_num_range").val("");
                                                            $("#bond_num").val("");
                                                            $("#industry").val("");
                                                            $("#bond_name").val("");
                                                            $("#revoke_date").val("");
                                                            $("#legal_type").val("");
                                                            $("#update_times").val("");
                                                            $("#legal_person_name").val("");
                                                            $("#comment").val("");
                                                            $("#bondType").val("");
                                                            $("#creditCode").val("");
                                                            $("#interface_sensitive").val("");
                                                            //刷新页面
                                                            window.location.href = "/material_audit.html";
                                                        }
                                                    })
                                                }
                                            }
                                        })
                                    }
                                },
                            });
                        }
                    })
                }
            }
        })
    }


</script>
<script>
    $("#uploadfile").fileinput({
        language: 'zh', //设置语言
        uploadUrl: "/UpLoad/review_materials", //上传的地址
        allowedFileExtensions: ['docx', 'zip', 'txt','doc'], //接收的文件后缀
        //uploadExtraData:{"id": 1, "fileName":'123.mp3'},
        showClose: false,//是否显示关闭按钮
        uploadAsync: true, //默认异步上传
        showUpload: true, //是否显示上传按钮
        showBrowse: true, //是否显示浏览按钮
        showRemove: true, //显示移除按钮
        showPreview: true, //是否显示预览
        showCaption: false, //是否显示标题
        browseClass: "btn btn-primary", //按钮样式
        dropZoneEnabled: true, //是否显示拖拽区域
        maxFileSize:0,//单位为kb，如果为0表示不限制文件大小
        //minFileCount: 0,
        maxFileCount: 10, //表示允许同时上传的最大文件个数
        enctype: 'multipart/form-data',
        validateInitialCount: true,
        previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
        msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
    }).on('filepreupload', function(event, data, previewId, index) {     //上传中
        console.log('文件正在上传');
    }).on("fileuploaded", function (event, data, previewId, index) {    //一个文件上传成功
        var form = data.form, files = data.files, extra = data.extra,
            response = data.response, reader = data.reader;
        console.log(response);//打印出返回的json
        console.log(response.status);//打印出路径
    }).on('fileerror', function(event, data, msg) {  //一个文件上传失败
        console.log('文件上传失败！'+data.status);
    })
</script>
</html>